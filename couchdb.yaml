namespace: couchdb


couchdb:
  defines: runnable
  services:
    couchdb:
      container: couchdb
      port: 5984
      protocol: tcp
      host-port: 5984
  metadata:
    defines: metadata
    name: couchdb
    description: |
      Apache CouchDB is an open-source document-oriented NoSQL database, implemented in Erlang. 
      
      CouchDB uses multiple formats and protocols to store, transfer, and process its data. It uses JSON to store data, JavaScript as its query language using MapReduce, and HTTP for an API
    tags: database, NoSQL
    website: https://couchdb.apache.org
    publisher: monk.io
    icon: https://blog.desdelinux.net/wp-content/uploads/2020/03/CouchDB-logo-1.png
  containers:
    defines: containers
    couchdb:
      image: docker.io/library/couchdb
      image-tag: <- `${couchdb-image-tag}`
      ports:
        - 5984:5984
      paths: 
        - <- `${volume_local}:${volume_container}`
  files:
    default-config:
      container: couchdb
      mode: 0644
      path: /opt/couchdb/etc/local.d/local.ini
      contents: <<< files/local.ini             
  variables:
    root-user:
      env: COUCHDB_USER
      value: <- `${couchdb-user}`
      type: string
    root-password:
      env: COUCHDB_PASSWORD
      value: <- `${couchdb-password}`
      type: string
    volume_local:
      type: string
      value: <- `${monk-volume-path}/couchdb`
    volume_container:
      type: string
      value: "/opt/couchdb/data"         