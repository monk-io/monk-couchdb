namespace: couchdb


couchdb:
  defines: runnable
  services:
    couchdb:
      container: couchdb
      port: 5984
      protocol: tcp
      host-port: 5984
  metadata:
    defines: metadata
    name: couchdb
    description: 
    tags: 
    website: 
    source: 
    publisher: "monk.io"
    icon: 
  containers:
    defines: containers
    couchdb:
      image: docker.io/library/couchdb
      image-tag: <- `${couchdb-image-tag}`
      ports:
        - 5984:5984
      paths: 
        - <- `${volume_local}:${volume_container}`
  files:
    default-config:
      container: couchdb
      mode: 0644
      path: /opt/couchdb/etc/local.d/local.ini
      contents: <<< files/local.ini             
  variables:
    root-user:
      env: COUCHDB_USER
      value: <- `${couchdb-user}`
      type: string
    root-password:
      env: COUCHDB_PASSWORD
      value: <- `${couchdb-password}`
      type: string
    volume_local:
      type: string
      value: <- `${monk-volume-path}/couchdb`
    volume_container:
      type: string
      value: "/opt/couchdb/data"         