---
namespace: couchdb

couchdb:
  defines: runnable
  services:
    couchdb:
      container: couchdb
      port: 5984
      protocol: tcp
      host-port: 5984
  metadata:
    defines: metadata
    name: couchdb
    description: |
      CouchDB is an open-source, document-oriented NoSQL (Not Only SQL) database management system developed by the Apache Software Foundation (ASF). 
      It is designed to store, retrieve, and manage unstructured and semi-structured data in the form of documents, which are stored in a JSON format. 
      CouchDB provides a distributed, fault-tolerant, and schema-free database solution that allows for easy replication and synchronization across multiple devices and servers.
    tags: database, NoSQL
    website: https://couchdb.apache.org
    publisher: monk.io
    icon: https://blog.desdelinux.net/wp-content/uploads/2020/03/CouchDB-logo-1.png
  containers:
    defines: containers
    couchdb:
      image: docker.io/library/couchdb
      image-tag: <- `${couchdb-image-tag}`
      ports:
        - 5984:5984
      paths:
        - <- `${volume_local}:${volume_container}`
  files:
    default-config:
      container: couchdb
      mode: 0644
      path: /opt/couchdb/etc/local.d/local.ini
      contents: <<< files/local.ini
  variables:
    root-user:
      env: COUCHDB_USER
      value: <- `${couchdb-user}`
      type: string
    root-password:
      env: COUCHDB_PASSWORD
      value: <- `${couchdb-password}`
      type: string
    volume_local:
      type: string
      value: <- `${monk-volume-path}/couchdb`
    volume_container:
      type: string
      value: /opt/couchdb/data
